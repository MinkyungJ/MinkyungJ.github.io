---
layout: post
title: DNS
tags: [DevOps, DNS]
date: 2023-07-15 00:53 +0800
categories: DNS
toc: true
---

# ❗️ DNS (Domain Name System)
DNS는 인터넷에서 도메인 이름을 IP 주소로 변환하는 시스템을 의미하며, 도메인 이름과 IP 주소 간의 매핑을 처리해 사용자가 도메인 이름을 통해 웹 사이트에 접속할 수 있도록 도와줍니다.
인터넷에 연결된 각 기기들은 고유한 IP 주소가 할당되어있습니다. DNS 서버를 사용하면 복잡한 IP주소를 기억할 필요가 없습니다.

---

## 웹 페이지 로드와 관련된 4개의 DNS 서버
- **재귀 DNS 확인자**: 웹 브라우저 등의 애플리케이션을 통해 클라이언트 컴퓨터로부터 쿼리를 받도록 고안된 서버를 의미합니다.
  - 클라이언트의 DNS 쿼리를 충족시키기 위해 추가 요청을 수행합니다.
- **루트 DNS 서버**: 호스트 이름을 IP 주소로 변환(확인)하는 첫 번째 단계입니다.
- **TLD(최상위 도메인) 서버**: 특정 IP 주소 검색의 다음 단계로 호스트 이름의 마지막 부분을 호스팅합니다.
  - EX> minkyung.com 에서 TLD 서버는 "com"입니다.
- **권한 DNS 서버**: 최종 서버이자 DNS 리소스 레코드를 보유하고 담당하는 서버를 의미합니다.
  -  권한 서버가 요청한 레코드에 대한 액세스 권한이 있다면, 요청한 호스트 이름의 IP주소를 초기 요청한 DNS 리커서에게 돌려 보냅니다.

### 권한 DNS 서버와 재귀 DNS 확인자의 차이점
둘 모두 DNS 인프라에 통합된 서버 그룹을 나타내지만, 다른 역할을 수행하며 DNS 쿼리 파이프라인 내부의 다른 위치에 있습니다.

1. 재귀 DNS 확인자 : 재귀 확인자는 클라이언트의 재귀 요청에 응답하고 DNS 레코드를 추적하는 데 시간을 투자하는 컴퓨터입니다.
  - 요청한 레코드에 대해, 권한 DNS 서버에 도달할 때 까지 요청하는 방식으로 수행합니다.
  ![재귀 DNS 확인자](https://github.com/MinkyungJ/MinkyungJ.github.io/blob/main/_posts/DNS_Recursive_Resolver.png.png?raw=true)

2. 권한 DNS 서버 : DNS 리소스 레코드를 보유하고 담당하는 서버입니다.
  - 웹 브라우저가 웹 사이트 or 리소스에 액세스하는데 필요한 IP 주소에 도달하도록 요청할 수 있게 하는 역할을 수행합니다.
  ![권한 DNS 서버](https://github.com/MinkyungJ/MinkyungJ.github.io/blob/main/_posts/DNS_Authoritative_Server.png?raw=true)

---

## DNS 조회

1. 사용자가 웹 브라우저에 도메인 이름 입력한다.
2. 컴퓨터는 로컬 DNS 캐시를 확인한다.
  - **(캐시가 존재할 경우)** : 이전에 저장한 도메인 이름과 해당 도메인의 IP주소 확인한다.
  - **(2단계에서 캐시가 없을 경우)** : 3단계로 진행된다.
3. 컴퓨터는 DNS 서버에 도메인 이름을 질의한다.
4. DNS서버는 계층 구조를 따라 TLD에서 하위 도메인으로 이동하며 도메인 이름을 가진 권한 DNS서버에 질의한다.
5. IP주소를 가진 권한 DNS 서버가 도메인 이름에 해당하는 IP주소를 찾으면, 이를 로컬 DNS 서버로 반환한다.
6. 로컬 DNS 서버는 IP주소를 DNS 캐시에 저장하고, IP주소를 컴퓨터로 전달한다.
7. 컴퓨터는 해당 IP주소로 웹 서버에 연결하여 페이지를 로드한다.

# Reference
<https://www.cloudflare.com/ko-kr/learning/dns/what-is-dns/>